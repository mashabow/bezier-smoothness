(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){e.exports=a(247)},247:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(24),l=a.n(c),i=a(9),o=a(91),s=a.n(o),u=a(7),p=a.n(u),d=a(92),m=a(83),b=a(36),y=a(93),v=a(84),g=a.n(v).a.fromArray,E=function(e,t){var a=e.p0,n=e.c0,r=e.c1,c=e.p1;return g(a).multiplyScalar(Math.pow(1-t,3)).add(g(n).multiplyScalar(3*Math.pow(1-t,2)*t)).add(g(r).multiplyScalar(3*(1-t)*Math.pow(t,2))).add(g(c).multiplyScalar(Math.pow(t,3))).toArray()},h=function(e,t){var a=e.p0,n=e.c0,r=e.c1,c=e.p1;return g(a).multiplyScalar(-3*Math.pow(t,2)+6*t-3).add(g(n).multiplyScalar(9*Math.pow(t,2)-12*t+3)).add(g(r).multiplyScalar(-9*Math.pow(t,2)+6*t)).add(g(c).multiplyScalar(3*Math.pow(t,2))).toArray()},f=function(e,t){return g(h(e,t)).normalize().toArray()},w=function(e,t){var a=g(h(e,t)),n=g(function(e,t){var a=e.p0,n=e.c0,r=e.c1,c=e.p1;return g(a).multiplyScalar(-6*t+6).add(g(n).multiplyScalar(18*t-12)).add(g(r).multiplyScalar(-18*t+6)).add(g(c).multiplyScalar(6*t)).toArray()}(e,t));return Math.pow(a.lengthSq(),1.5)/a.cross(n)},x=function(e,t){var a=g(t.p0),n=g(t.c0),r=g(t.c1),c=g(t.p1),l=a.clone().subtract(g(e.p1));return{p0:a.subtract(l).toArray(),c0:n.subtract(l).toArray(),c1:r.subtract(l).toArray(),p1:c.subtract(l).toArray()}},S=function(e,t){t=x(e,t);var a=g(e.p1).subtract(g(e.c1)),n=g(t.c0).subtract(g(t.p0)),r=n.rotate(a.angle()-n.angle()).add(g(t.p0));return Object(b.a)({},t,{c0:r.toArray()})},C={beziers:[{points:{p0:[80,320],c0:[100,130],c1:[330,90],p1:[350,170]},t:.9},{points:{p0:[350,250],c0:[460,320],c1:[270,430],p1:[510,480]},t:.2}],draggingPoint:null,visibilities:{bezierOnly:!1,tangent:!1,osculatingCircle:!1,curvatureComb:!1}},A=function(e,t){switch(t.type){case"DRAG_START":return void(e.draggingPoint=t.payload);case"DRAG":if(!e.draggingPoint)return;return void(e.beziers[e.draggingPoint.index].points[e.draggingPoint.name]=t.payload);case"DRAG_END":return void(e.draggingPoint=null);case"SET_T":return void(e.beziers[t.payload.index].t=t.payload.value);case"SET_VISIBILITY":return void(e.visibilities[t.payload.key]=t.payload.value);case"MAKE_G0":return void(e.beziers[1].points=x(e.beziers[0].points,e.beziers[1].points));case"MAKE_G1":return void(e.beziers[1].points=S(e.beziers[0].points,e.beziers[1].points));case"MAKE_G2":return void(e.beziers[1].points=function(e,t){t=S(e,t);var a=w(e,1),n=g(t.c0).subtract(g(t.p0)),r=g(t.c1).subtract(g(t.p0)).rotate(-n.angle()).y;if(r*a>=0){var c=Math.sqrt(2/3*r*a),l=n.normalize().multiplyScalar(c).add(g(t.p0));return Object(b.a)({},t,{c0:l.toArray()})}var i=n.length(),o=1.5*Math.pow(i,2)/a,s=g(t.p1).subtract(g(t.p0)).rotate(-n.angle()),u=(o-s.y)/(r-s.y),p=g(t.c1).subtract(g(t.p1)).multiplyScalar(u).add(g(t.p1));return Object(b.a)({},t,{c1:p.toArray()})}(e.beziers[0].points,e.beziers[1].points));case"RESET_POINTS":return e.beziers[0].points=C.beziers[0].points,void(e.beziers[1].points=C.beziers[1].points);default:return}},O=r.a.createContext({state:C,dispatch:function(){}}),k=function(e){var t=e.children,a=Object(m.a)(A,C),n=Object(d.a)(a,2),c=n[0],l=n[1];return r.a.createElement(O.Provider,{value:{state:c,dispatch:l}},t)},z=function(){return Object(n.useContext)(O)},M=Object(i.a)({handleLine:{stroke:"black",opacity:.3},anchorPoint:{fill:"white",stroke:"black",cursor:"pointer"},controlPoint:{fill:"white",stroke:"#999",cursor:"pointer"}}),j=function(e){var t=e.p,a=e.c,n=e.dispatchDragStartP,c=e.dispatchDragStartC,l=M();return r.a.createElement("g",null,r.a.createElement("line",{className:l.handleLine,x1:t[0],y1:t[1],x2:a[0],y2:a[1]}),r.a.createElement("rect",{className:l.anchorPoint,x:t[0]-2.5,y:t[1]-2.5,width:5,height:5,onMouseDown:n}),r.a.createElement("circle",{className:l.controlPoint,cx:a[0],cy:a[1],r:3,onMouseDown:c}))},N=Object(i.a)({root:{fill:"none",stroke:"black"},curvatureComb:{pointerEvents:"none"},tangent:{stroke:"blue"},osculatingCircle:{stroke:"#0b8"},tPoint:{fill:"black",stroke:"none",pointerEvents:"none"}}),D=function(e){var t=Math.max(65-3e3*Math.abs(e),-20);return"hsl(".concat(t,", 100%, 50%)")},P=function(e){var t=e.index,a=N(),c=z(),l=c.state,i=c.dispatch,o=Object(n.useCallback)(function(e){return function(){return i({type:"DRAG_START",payload:{index:t,name:e}})}},[i,t]),s=l.beziers[t],u=s.points,p=s.t,d=E(u,p),m=f(u,p),b=w(u,p),v=[d[0]-m[1]*b,d[1]+m[0]*b],h=u.p0,x=u.c0,S=u.c1,C=u.p1,A=r.a.createElement("path",{d:"M ".concat(h," C ").concat(x," ").concat(S," ").concat(C)});return l.visibilities.bezierOnly?r.a.createElement("g",{className:a.root},A):r.a.createElement("g",{className:a.root},l.visibilities.curvatureComb&&r.a.createElement("g",{className:a.curvatureComb},function(e,t,a){return Object(y.a)(Array(t)).map(function(n,r){var c=r/(t-1),l=E(e,c),i=f(e,c),o=1/w(e,c);return{start:l,end:g([-i[1],i[0]]).multiplyScalar(-o*a).add(g(l)).toArray(),curvature:o}})}(u,80,2e3).map(function(e,t){var a=e.start,n=e.end,c=e.curvature;return r.a.createElement("line",{key:t,x1:a[0],y1:a[1],x2:n[0],y2:n[1],stroke:D(c)})})),A,r.a.createElement(j,{p:h,c:x,dispatchDragStartP:o("p0"),dispatchDragStartC:o("c0")}),r.a.createElement(j,{p:C,c:S,dispatchDragStartP:o("p1"),dispatchDragStartC:o("c1")}),l.visibilities.tangent&&r.a.createElement("line",{className:a.tangent,x1:d[0]-150*m[0]/2,y1:d[1]-150*m[1]/2,x2:d[0]+150*m[0]/2,y2:d[1]+150*m[1]/2}),l.visibilities.osculatingCircle&&r.a.createElement("g",{className:a.osculatingCircle},r.a.createElement("circle",{cx:v[0],cy:v[1],r:Math.abs(b)}),r.a.createElement("line",{x1:d[0],y1:d[1],x2:v[0],y2:v[1]})),r.a.createElement("circle",{className:a.tPoint,cx:d[0],cy:d[1],r:3}))},T=a(85),_=a.n(T),G=function(e){var t=e.type,a=e.color,c=void 0===a?"primary":a,l=e.children,i=z().dispatch,o=Object(n.useCallback)(function(){return i({type:t})},[i,t]),s=I();return r.a.createElement(_.a,{className:s.button,variant:"outlined",color:c,onClick:o},l)},I=Object(i.a)({root:{display:"flex",justifyContent:"space-between",flexWrap:"wrap",marginTop:35,"@global":{sup:{position:"relative",top:-2,paddingRight:1}}},button:{marginBottom:20}}),R=function(){var e=I();return r.a.createElement("div",{className:e.root},r.a.createElement(G,{type:"MAKE_G0"},r.a.createElement("i",null,"G"),r.a.createElement("sup",null,"0"),"\u9023\u7d9a"),r.a.createElement(G,{type:"MAKE_G1"},r.a.createElement("i",null,"G"),r.a.createElement("sup",null,"1"),"\u9023\u7d9a"),r.a.createElement(G,{type:"MAKE_G2"},r.a.createElement("i",null,"G"),r.a.createElement("sup",null,"2"),"\u9023\u7d9a"),r.a.createElement(G,{type:"RESET_POINTS",color:"secondary"},"\u4f4d\u7f6e\u3092\u30ea\u30bb\u30c3\u30c8"))},K=a(87),B=a.n(K),L=a(52),W=a.n(L),Y=Object(i.a)({root:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:20},label:{flex:"none",paddingLeft:10}}),q=function(e){var t=e.index,a=Y(),c=z(),l=c.state,i=c.dispatch,o=Object(n.useCallback)(function(e,a){return i({type:"SET_T",payload:{index:t,value:a}})},[i,t]),s=l.beziers[t].t;return r.a.createElement("div",{className:a.root},r.a.createElement(B.a,{value:s,min:0,max:1,step:.01,onChange:o}),r.a.createElement(W.a,{variant:"body1",className:a.label},"AB"[t],": ",r.a.createElement("i",null,"t")," = ",s.toFixed(2)))},J=a(89),V=a.n(J),F=a(88),U=a.n(F),X=a(90),$=a.n(X),H=function(e){var t=e.vKey,a=e.label,c=z(),l=c.state,i=c.dispatch,o=Object(n.useCallback)(function(e,a){return i({type:"SET_VISIBILITY",payload:{key:t,value:a}})},[t,i]);return r.a.createElement(U.a,{control:r.a.createElement(V.a,{checked:l.visibilities[t],onChange:o,disabled:l.visibilities.bezierOnly&&"bezierOnly"!==t,color:"bezierOnly"===t?"secondary":"primary"}),label:a})},Q=Object(i.a)({root:{marginTop:20}}),Z=function(){var e=Q();return r.a.createElement($.a,{className:e.root},r.a.createElement(H,{vKey:"bezierOnly",label:"\u30d9\u30b8\u30a8\u66f2\u7dda\u306e\u307f"}),r.a.createElement(H,{vKey:"tangent",label:"\u63a5\u7dda"}),r.a.createElement(H,{vKey:"osculatingCircle",label:"\u63a5\u89e6\u5186"}),r.a.createElement(H,{vKey:"curvatureComb",label:"\u66f2\u7387\u306e\u6adb"}))},ee=Object(i.a)({root:{display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"}}),te=function(e){var t=e.className,a=ee();return r.a.createElement("div",{className:p()(t,a.root)},r.a.createElement(q,{index:0}),r.a.createElement(q,{index:1}),r.a.createElement(Z,null),r.a.createElement(R,null))},ae=Object(i.a)({root:{margin:"auto",display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},svg:{flex:"none",backgroundColor:"white"},svgDragging:{cursor:"pointer"},controls:{width:300,height:600,padding:20,overflow:"hidden"}}),ne=function(){var e=ae(),t=Object(n.useRef)(null),a=z(),c=a.state,l=a.dispatch,i=Object(n.useCallback)(function(e){var a=t.current.getBoundingClientRect();l({type:"DRAG",payload:[e.clientX-a.left,e.clientY-a.top]})},[l]),o=Object(n.useCallback)(function(){return l({type:"DRAG_END"})},[l]),s=Boolean(c.draggingPoint);return r.a.createElement("div",{className:e.root,onMouseMove:s?i:void 0,onMouseUp:s?o:void 0},r.a.createElement("svg",{ref:t,className:p()(e.svg,s&&e.svgDragging),width:600,height:600},r.a.createElement(P,{index:0}),r.a.createElement(P,{index:1})),r.a.createElement(te,{className:e.controls}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(function(){return r.a.createElement(k,null,r.a.createElement(s.a,null),r.a.createElement(ne,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[100,1,2]]]);
//# sourceMappingURL=main.e2218505.chunk.js.map