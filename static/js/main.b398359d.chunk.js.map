{"version":3,"sources":["calc.ts","reducer.ts","store.tsx","Handle.tsx","Bezier.tsx","EditButtons.tsx","TSlider.tsx","Visibilities.tsx","Controls.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["v","Victor","fromArray","calcTPoint","_ref","t","p0","c0","c1","p1","multiplyScalar","Math","pow","add","toArray","calcFirstDerivative","_ref2","calcUnitTangentVector","points","normalize","calcCurvatureRadius","d1","d2","_ref3","calcSecondDerivative","lengthSq","cross","satisfyG0","reference","target","offset","clone","subtract","satisfyG1","referenceV","targetV","newC0","rotate","angle","Object","objectSpread","initialState","beziers","draggingPoint","visibilities","bezierOnly","tangent","osculatingCircle","curvatureComb","reducer","draft","action","type","payload","draftPoints","index","name","value","key","referenceR","handle0","cy","y","newL0","sqrt","l0","length","newCy","rotatedP1","ratio","newC1","satisfyG2","Store","React","createContext","state","dispatch","Provider","children","_useImmerReducer","useImmerReducer","_useImmerReducer2","slicedToArray","react_default","a","createElement","useStore","useContext","useStyles","makeStyles","handleLine","stroke","opacity","anchorPoint","fill","cursor","controlPoint","Handle","p","c","dispatchDragStartP","dispatchDragStartC","classes","className","x1","y1","x2","y2","x","rectSize","width","height","onMouseDown","cx","r","root","pointerEvents","tPoint","curvatureToColor","curvature","hue","max","abs","concat","Bezier","_useStore","dispatchDragStart","useCallback","_state$beziers$index","pt","curvatureRadius","osculatingCircleCenter","bezierCurve","d","numTheeth","scale","toConsumableArray","Array","map","_","i","start","end","calcCurvatureComb","src_Handle","EditButton","_ref$color","color","dispatchAction","Button_default","button","variant","onClick","display","justifyContent","flexWrap","marginTop","@global","sup","position","top","paddingRight","marginBottom","EditButtons","EditButtons_EditButton","alignItems","label","flex","paddingLeft","TSlider","dispatchSetT","Slider_default","min","step","onChange","Typography_default","toFixed","VisibilityCheckbox","vKey","dispatchSetVisibility","FormControlLabel_default","control","Checkbox_default","checked","disabled","Visibilities","FormGroup_default","Visibilities_VisibilityCheckbox","flexDirection","overflow","Controls","classnames","src_TSlider","src_Visibilities","src_EditButtons","margin","svg","backgroundColor","svgDragging","controls","padding","App","svgRef","useRef","dispatchDrag","e","rect","current","getBoundingClientRect","clientX","left","clientY","dispatchDragEnd","dragging","Boolean","onMouseMove","undefined","onMouseUp","ref","src_Bezier","src_Controls","window","location","hostname","match","ReactDOM","render","store_Provider","CssBaseline_default","App_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.b398359d.chunk.js","sourcesContent":["import Victor from 'victor';\n\nimport { BezierPoints, Point } from './type';\n\n// 性能はまったく考慮していないので、注意\n// satisfyG* の調整も安直なアルゴリズムで実装している（もっと良い調整方法はいろいろ考えられる）\n\n// Victor が immutable になっていなくて扱いが厄介なので（つらい）、\n// 引数や返り値には Point を使っておく\n\nconst v = Victor.fromArray;\n\n// t に対応するベジエ曲線上の点\nexport const calcTPoint = (\n  { p0, c0, c1, p1 }: BezierPoints,\n  t: number,\n): Point =>\n  v(p0)\n    .multiplyScalar((1 - t) ** 3)\n    .add(v(c0).multiplyScalar(3 * (1 - t) ** 2 * t))\n    .add(v(c1).multiplyScalar(3 * (1 - t) * t ** 2))\n    .add(v(p1).multiplyScalar(t ** 3))\n    .toArray() as Point;\n\n// 1階微分\nconst calcFirstDerivative = (\n  { p0, c0, c1, p1 }: BezierPoints,\n  t: number,\n): Point =>\n  v(p0)\n    .multiplyScalar(-3 * t ** 2 + 6 * t - 3)\n    .add(v(c0).multiplyScalar(9 * t ** 2 - 12 * t + 3))\n    .add(v(c1).multiplyScalar(-9 * t ** 2 + 6 * t))\n    .add(v(p1).multiplyScalar(3 * t ** 2))\n    .toArray() as Point;\n\n// 2階微分\nconst calcSecondDerivative = (\n  { p0, c0, c1, p1 }: BezierPoints,\n  t: number,\n): Point =>\n  v(p0)\n    .multiplyScalar(-6 * t + 6)\n    .add(v(c0).multiplyScalar(18 * t - 12))\n    .add(v(c1).multiplyScalar(-18 * t + 6))\n    .add(v(p1).multiplyScalar(6 * t))\n    .toArray() as Point;\n\n// 単位接ベクトル\nexport const calcUnitTangentVector = (points: BezierPoints, t: number): Point =>\n  v(calcFirstDerivative(points, t))\n    .normalize()\n    .toArray() as Point;\n\n// 曲率半径\nexport const calcCurvatureRadius = (\n  points: BezierPoints,\n  t: number,\n): number => {\n  const d1 = v(calcFirstDerivative(points, t));\n  const d2 = v(calcSecondDerivative(points, t));\n  const numerator = d1.lengthSq() ** 1.5;\n  const denominator = d1.cross(d2);\n  return numerator / denominator;\n};\n\n// 曲率の櫛。numTheeth 本の歯を持つように、t を等間隔にサンプリングして求める\nexport const calcCurvatureComb = (\n  points: BezierPoints,\n  numTheeth: number,\n  scale: number,\n): Array<{ start: Point; end: Point; curvature: number }> =>\n  [...Array(numTheeth)].map((_, i) => {\n    const t = i / (numTheeth - 1); // 両端（0, 1）にも割り当てる\n    const tPoint = calcTPoint(points, t);\n    const tangent = calcUnitTangentVector(points, t);\n    const curvature = 1 / calcCurvatureRadius(points, t);\n    return {\n      start: tPoint,\n      end: v([-tangent[1], tangent[0]]) // 単位法線ベクトル\n        .multiplyScalar(-curvature * scale)\n        .add(v(tPoint))\n        .toArray() as Point,\n      curvature,\n    };\n  });\n\n// reference と target が G0 連続になるように target を調整した場合の BezierPoints を求める\n// reference.p1 と target.p0 が重なるように平行移動すればよい\nexport const satisfyG0 = (\n  reference: BezierPoints,\n  target: BezierPoints,\n): BezierPoints => {\n  const p0 = v(target.p0);\n  const c0 = v(target.c0);\n  const c1 = v(target.c1);\n  const p1 = v(target.p1);\n\n  const offset = p0.clone().subtract(v(reference.p1));\n  return {\n    p0: p0.subtract(offset).toArray() as Point,\n    c0: c0.subtract(offset).toArray() as Point,\n    c1: c1.subtract(offset).toArray() as Point,\n    p1: p1.subtract(offset).toArray() as Point,\n  };\n};\n\n// reference と target が G1 連続になるように target を調整した場合の BezierPoints を求める\n// G0 連続にした上で、reference.c1, reference.p1 = target.p0, target.c0 の 3 点が\n// 同一直線上に乗るように、target.c0 を移動すればよい\nexport const satisfyG1 = (\n  reference: BezierPoints,\n  target: BezierPoints,\n): BezierPoints => {\n  target = satisfyG0(reference, target);\n\n  const referenceV = v(reference.p1).subtract(v(reference.c1));\n  const targetV = v(target.c0).subtract(v(target.p0));\n  // p0 を中心にして c0 を回転させる（ハンドルの長さを保つ）ことにする\n  const newTargetV = targetV.rotate(referenceV.angle() - targetV.angle());\n  const newC0 = newTargetV.add(v(target.p0));\n\n  return {\n    ...target,\n    c0: newC0.toArray() as Point,\n  };\n};\n\n// reference と target が G2 連続になるように target を調整した場合の BezierPoints を求める\n// G1 連続にした上で、reference.p1, target.p0 それぞれにおける曲率が一致するように\n// target.c0 もしくは target.c1 を移動すればよい\nexport const satisfyG2 = (\n  reference: BezierPoints,\n  target: BezierPoints,\n): BezierPoints => {\n  target = satisfyG1(reference, target);\n\n  const referenceR = calcCurvatureRadius(reference, 1);\n  const handle0 = v(target.c0).subtract(v(target.p0)); // p0 側のハンドル\n  // 計算を簡単にするため、target を回転・平行移動し、\n  // p0 が原点 (0, 0)、c0 が x 軸上 (l0, 0) に来るようにしておく（ただし l0 >= 0 とする）。\n  const rotatedC1 = v(target.c1)\n    .subtract(v(target.p0))\n    .rotate(-handle0.angle());\n  // このとき、c1 の y 座標を cy とすると、p0 における曲率半径 R との関係は R = (3 l0^2) / (2 cy) となる\n  const cy = rotatedC1.y;\n  if (cy * referenceR >= 0) {\n    // cy と R が同符号のとき、上述の関係式を満たす l0 を求めることができる\n    const newL0 = Math.sqrt((2 / 3) * cy * referenceR); // p0 側のハンドルの（調整後の）長さ\n    const newC0 = handle0\n      .normalize()\n      .multiplyScalar(newL0)\n      .add(v(target.p0));\n    return {\n      ...target,\n      c0: newC0.toArray() as Point,\n    };\n  } else {\n    // cy と R の符号が異なるとき、上述の関係式を満たす正の実数 l0 は存在しない\n    // そこで、p1 側のハンドルの長さを変えることによって、G2 連続となるように調整することを考える\n    const l0 = handle0.length();\n    const newCy = ((3 / 2) * l0 ** 2) / referenceR;\n    // c1 の y 座標 cy が newCy に一致するよう、c1 を動かせば（ハンドルを伸ばせば）よい\n    const rotatedP1 = v(target.p1)\n      .subtract(v(target.p0))\n      .rotate(-handle0.angle());\n    const ratio = (newCy - rotatedP1.y) / (cy - rotatedP1.y);\n    const newC1 = v(target.c1)\n      .subtract(v(target.p1))\n      .multiplyScalar(ratio)\n      .add(v(target.p1));\n    return {\n      ...target,\n      c1: newC1.toArray() as Point,\n    };\n  }\n};\n","import { Reducer } from 'use-immer';\n\nimport { satisfyG0, satisfyG1, satisfyG2 } from './calc';\nimport { Action, State } from './type';\n\nexport const initialState: State = {\n  beziers: [\n    {\n      points: {\n        p0: [80, 320],\n        c0: [100, 130],\n        c1: [330, 90],\n        p1: [350, 170],\n      },\n      t: 0.9,\n    },\n    {\n      points: {\n        p0: [350, 250],\n        c0: [460, 320],\n        c1: [270, 430],\n        p1: [510, 480],\n      },\n      t: 0.2,\n    },\n  ],\n  draggingPoint: null,\n  visibilities: {\n    bezierOnly: false,\n    tangent: false,\n    osculatingCircle: false,\n    curvatureComb: false,\n  },\n};\n\nconst reducer: Reducer<State, Action> = (draft, action) => {\n  switch (action.type) {\n    case 'DRAG_START':\n      draft.draggingPoint = action.payload;\n      return;\n    case 'DRAG':\n      if (!draft.draggingPoint) return;\n      const draftPoints = draft.beziers[draft.draggingPoint.index].points;\n      const name = draft.draggingPoint.name;\n      if (name === 'p0') {\n        draftPoints.c0 = [\n          draftPoints.c0[0] - draftPoints.p0[0] + action.payload[0],\n          draftPoints.c0[1] - draftPoints.p0[1] + action.payload[1],\n        ];\n      } else if (name === 'p1') {\n        draftPoints.c1 = [\n          draftPoints.c1[0] - draftPoints.p1[0] + action.payload[0],\n          draftPoints.c1[1] - draftPoints.p1[1] + action.payload[1],\n        ];\n      }\n      draftPoints[name] = action.payload;\n      return;\n    case 'DRAG_END':\n      draft.draggingPoint = null;\n      return;\n    case 'SET_T':\n      draft.beziers[action.payload.index].t = action.payload.value;\n      return;\n    case 'SET_VISIBILITY':\n      draft.visibilities[action.payload.key] = action.payload.value;\n      return;\n    case 'MAKE_G0':\n      draft.beziers[1].points = satisfyG0(\n        draft.beziers[0].points,\n        draft.beziers[1].points,\n      );\n      return;\n    case 'MAKE_G1':\n      draft.beziers[1].points = satisfyG1(\n        draft.beziers[0].points,\n        draft.beziers[1].points,\n      );\n      return;\n    case 'MAKE_G2':\n      draft.beziers[1].points = satisfyG2(\n        draft.beziers[0].points,\n        draft.beziers[1].points,\n      );\n      return;\n    case 'RESET_POINTS':\n      draft.beziers[0].points = initialState.beziers[0].points;\n      draft.beziers[1].points = initialState.beziers[1].points;\n      return;\n    default:\n      return;\n  }\n};\n\nexport default reducer;\n","import React, { useContext } from 'react';\nimport { useImmerReducer } from 'use-immer';\n\nimport reducer, { initialState } from './reducer';\nimport { Action } from './type';\n\nconst Store = React.createContext({\n  state: initialState,\n  dispatch: (() => {}) as React.Dispatch<Action>,\n});\n\nexport const Provider: React.FC = ({ children }) => {\n  const [state, dispatch] = useImmerReducer(reducer, initialState);\n  return (\n    <Store.Provider value={{ state, dispatch }}>{children}</Store.Provider>\n  );\n};\n\nexport const useStore = () => useContext(Store);\n","import { makeStyles } from '@material-ui/styles';\nimport React from 'react';\n\nimport { Point } from './type';\n\nconst useStyles = makeStyles({\n  handleLine: {\n    stroke: 'black',\n    opacity: 0.3,\n  },\n  anchorPoint: {\n    fill: 'white',\n    stroke: 'black',\n    cursor: 'pointer',\n  },\n  controlPoint: {\n    fill: 'white',\n    stroke: '#999',\n    cursor: 'pointer',\n  },\n});\n\n// 端点 p から制御点 c へと伸びるハンドル。両点も描画する\nconst Handle: React.FC<{\n  p: Point;\n  c: Point;\n  dispatchDragStartP: () => void;\n  dispatchDragStartC: () => void;\n}> = ({ p, c, dispatchDragStartP, dispatchDragStartC }) => {\n  const classes = useStyles();\n  const rectSize = 5;\n  return (\n    <g>\n      <line\n        className={classes.handleLine}\n        x1={p[0]}\n        y1={p[1]}\n        x2={c[0]}\n        y2={c[1]}\n      />\n      <rect\n        className={classes.anchorPoint}\n        x={p[0] - rectSize / 2}\n        y={p[1] - rectSize / 2}\n        width={rectSize}\n        height={rectSize}\n        onMouseDown={dispatchDragStartP}\n      />\n      <circle\n        className={classes.controlPoint}\n        cx={c[0]}\n        cy={c[1]}\n        r={3}\n        onMouseDown={dispatchDragStartC}\n      />\n    </g>\n  );\n};\n\nexport default Handle;\n","import { makeStyles } from '@material-ui/styles';\nimport React, { useCallback } from 'react';\n\nimport Handle from './Handle';\nimport { useStore } from './store';\nimport {\n  calcTPoint,\n  calcUnitTangentVector,\n  calcCurvatureRadius,\n  calcCurvatureComb,\n} from './calc';\nimport { PointName } from './type';\n\nconst useStyles = makeStyles({\n  root: {\n    fill: 'none',\n    stroke: 'black',\n  },\n  curvatureComb: {\n    pointerEvents: 'none',\n  },\n  tangent: {\n    stroke: 'blue',\n  },\n  osculatingCircle: {\n    stroke: '#0b8',\n  },\n  tPoint: {\n    fill: 'black',\n    stroke: 'none',\n    pointerEvents: 'none',\n  },\n});\n\nconst curvatureToColor = (curvature: number): string => {\n  // 黄→赤 となるように適当に決めた関数\n  const hue = Math.max(65 - Math.abs(curvature) * 3000, -20);\n  return `hsl(${hue}, 100%, 50%)`;\n};\n\n// 始点 p0, 制御点 c0, c1, 終点 p1 によって定義される 3 次ベジエ曲線\nconst Bezier: React.FC<{ index: 0 | 1 }> = ({ index }) => {\n  const classes = useStyles();\n  const { state, dispatch } = useStore();\n  const dispatchDragStart = useCallback(\n    (name: PointName) => () =>\n      dispatch({\n        type: 'DRAG_START',\n        payload: { index, name },\n      }),\n    [dispatch, index],\n  );\n\n  const { points, t } = state.beziers[index];\n  const pt = calcTPoint(points, t);\n  const tangent = calcUnitTangentVector(points, t);\n  const curvatureRadius = calcCurvatureRadius(points, t);\n  const osculatingCircleCenter = [\n    pt[0] - tangent[1] * curvatureRadius,\n    pt[1] + tangent[0] * curvatureRadius,\n  ];\n\n  const { p0, c0, c1, p1 } = points;\n  const bezierCurve = <path d={`M ${p0} C ${c0} ${c1} ${p1}`} />;\n  const tangentLength = 150;\n\n  return state.visibilities.bezierOnly ? (\n    <g className={classes.root}>{bezierCurve}</g>\n  ) : (\n    <g className={classes.root}>\n      {state.visibilities.curvatureComb && (\n        <g className={classes.curvatureComb}>\n          {calcCurvatureComb(points, 80, 2000).map(\n            ({ start, end, curvature }, i) => (\n              <line\n                key={i}\n                x1={start[0]}\n                y1={start[1]}\n                x2={end[0]}\n                y2={end[1]}\n                stroke={curvatureToColor(curvature)}\n              />\n            ),\n          )}\n        </g>\n      )}\n      {bezierCurve}\n      <Handle\n        p={p0}\n        c={c0}\n        dispatchDragStartP={dispatchDragStart('p0')}\n        dispatchDragStartC={dispatchDragStart('c0')}\n      />\n      <Handle\n        p={p1}\n        c={c1}\n        dispatchDragStartP={dispatchDragStart('p1')}\n        dispatchDragStartC={dispatchDragStart('c1')}\n      />\n      {state.visibilities.tangent && (\n        <line\n          className={classes.tangent}\n          x1={pt[0] - (tangent[0] * tangentLength) / 2}\n          y1={pt[1] - (tangent[1] * tangentLength) / 2}\n          x2={pt[0] + (tangent[0] * tangentLength) / 2}\n          y2={pt[1] + (tangent[1] * tangentLength) / 2}\n        />\n      )}\n      {state.visibilities.osculatingCircle && (\n        <g className={classes.osculatingCircle}>\n          <circle\n            cx={osculatingCircleCenter[0]}\n            cy={osculatingCircleCenter[1]}\n            r={Math.abs(curvatureRadius)}\n          />\n          <line\n            x1={pt[0]}\n            y1={pt[1]}\n            x2={osculatingCircleCenter[0]}\n            y2={osculatingCircleCenter[1]}\n          />\n        </g>\n      )}\n      <circle className={classes.tPoint} cx={pt[0]} cy={pt[1]} r={3} />\n    </g>\n  );\n};\n\nexport default Bezier;\n","import { makeStyles } from '@material-ui/styles';\nimport { PropTypes } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport React, { useCallback } from 'react';\n\nimport { useStore } from './store';\nimport { EditButtonType } from './type';\n\nconst EditButton: React.FC<{\n  type: EditButtonType;\n  color?: PropTypes.Color;\n}> = ({ type, color = 'primary', children }) => {\n  const { dispatch } = useStore();\n  const dispatchAction = useCallback(() => dispatch({ type }), [\n    dispatch,\n    type,\n  ]);\n  const classes = useStyles();\n\n  return (\n    <Button\n      className={classes.button}\n      variant=\"outlined\"\n      color={color}\n      onClick={dispatchAction}\n    >\n      {children}\n    </Button>\n  );\n};\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    flexWrap: 'wrap',\n    marginTop: 35,\n    '@global': {\n      sup: {\n        // 読みにくいので微調整\n        position: 'relative',\n        top: -2,\n        paddingRight: 1,\n      },\n    },\n  },\n  button: {\n    marginBottom: 20,\n  },\n});\n\nconst EditButtons: React.FC = () => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <EditButton type=\"MAKE_G0\">\n        <i>G</i>\n        <sup>0</sup>連続\n      </EditButton>\n      <EditButton type=\"MAKE_G1\">\n        <i>G</i>\n        <sup>1</sup>連続\n      </EditButton>\n      <EditButton type=\"MAKE_G2\">\n        <i>G</i>\n        <sup>2</sup>連続\n      </EditButton>\n      <EditButton type=\"RESET_POINTS\" color=\"secondary\">\n        位置をリセット\n      </EditButton>\n    </div>\n  );\n};\n\nexport default EditButtons;\n","import { makeStyles } from '@material-ui/styles';\nimport Slider from '@material-ui/lab/Slider';\nimport Typography from '@material-ui/core/Typography';\nimport React, { useCallback } from 'react';\n\nimport { useStore } from './store';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  label: {\n    flex: 'none',\n    paddingLeft: 10,\n  },\n});\n\nconst TSlider: React.FC<{ index: 0 | 1 }> = ({ index }) => {\n  const classes = useStyles();\n  const { state, dispatch } = useStore();\n  const dispatchSetT = useCallback(\n    (_, value: number) =>\n      dispatch({\n        type: 'SET_T',\n        payload: { index, value },\n      }),\n    [dispatch, index],\n  );\n\n  const t = state.beziers[index].t;\n\n  return (\n    <div className={classes.root}>\n      <Slider value={t} min={0} max={1} step={0.01} onChange={dispatchSetT} />\n      <Typography variant=\"body1\" className={classes.label}>\n        {'AB'[index]}: <i>t</i> = {t.toFixed(2)}\n      </Typography>\n    </div>\n  );\n};\n\nexport default TSlider;\n","import { makeStyles } from '@material-ui/styles';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport React, { useCallback } from 'react';\n\nimport { useStore } from './store';\nimport { VisibilitiesKey } from './type';\n\nconst VisibilityCheckbox: React.FC<{\n  vKey: VisibilitiesKey;\n  label: string;\n}> = ({ vKey, label }) => {\n  const { state, dispatch } = useStore();\n  const dispatchSetVisibility = useCallback(\n    (_, value: boolean) =>\n      dispatch({\n        type: 'SET_VISIBILITY',\n        payload: { key: vKey, value },\n      }),\n    [vKey, dispatch],\n  );\n\n  return (\n    <FormControlLabel\n      control={\n        <Checkbox\n          checked={state.visibilities[vKey]}\n          onChange={dispatchSetVisibility}\n          disabled={state.visibilities.bezierOnly && vKey !== 'bezierOnly'}\n          color={vKey === 'bezierOnly' ? 'secondary' : 'primary'}\n        />\n      }\n      label={label}\n    />\n  );\n};\n\nconst useStyles = makeStyles({\n  root: {\n    marginTop: 20,\n  },\n});\n\nconst Visibilities: React.FC = () => {\n  const classes = useStyles();\n\n  return (\n    <FormGroup className={classes.root}>\n      <VisibilityCheckbox vKey=\"bezierOnly\" label=\"ベジエ曲線のみ\" />\n      <VisibilityCheckbox vKey=\"tangent\" label=\"接線\" />\n      <VisibilityCheckbox vKey=\"osculatingCircle\" label=\"接触円\" />\n      <VisibilityCheckbox vKey=\"curvatureComb\" label=\"曲率の櫛\" />\n    </FormGroup>\n  );\n};\n\nexport default Visibilities;\n","import { makeStyles } from '@material-ui/styles';\nimport classnames from 'classnames';\nimport React from 'react';\n\nimport EditButtons from './EditButtons';\nimport TSlider from './TSlider';\nimport Visibilities from './Visibilities';\n\nconst useStyles = makeStyles({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    // スライダ操作するとスクロールバーが表示されてしまうようなので、それを回避\n    overflow: 'hidden',\n  },\n});\n\nconst Controls: React.FC<{ className: string }> = ({ className }) => {\n  const classes = useStyles();\n\n  return (\n    <div className={classnames(className, classes.root)}>\n      <TSlider index={0} />\n      <TSlider index={1} />\n      <Visibilities />\n      <EditButtons />\n    </div>\n  );\n};\n\nexport default Controls;\n","import { makeStyles } from '@material-ui/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport classnames from 'classnames';\nimport React, { useCallback, useRef } from 'react';\n\nimport { useStore, Provider } from './store';\nimport Bezier from './Bezier';\nimport Controls from './Controls';\n\nconst svgSize = 600;\n\nconst useStyles = makeStyles({\n  root: {\n    margin: 'auto',\n    display: 'flex',\n    justifyContent: 'center',\n    // 上下中央に\n    alignItems: 'center',\n    height: '100vh',\n  },\n  svg: {\n    flex: 'none',\n    backgroundColor: 'white',\n  },\n  svgDragging: {\n    // ドラッグしている点がカーソルに追いつかないこともあるので、\n    // ドラッグ中は SVG 全体にも cursor: 'pointer' を指定して、ちらつきを防ぐ\n    cursor: 'pointer',\n  },\n  controls: {\n    width: 300,\n    height: svgSize,\n    padding: 20,\n  },\n});\n\nconst App: React.FC = () => {\n  const classes = useStyles();\n  const svgRef = useRef<SVGSVGElement>(null);\n  const { state, dispatch } = useStore();\n  const dispatchDrag = useCallback(\n    (e: React.MouseEvent) => {\n      // オフセット分を差し引いて SVG 座標系に変換する\n      // getScreenCTM() を使って座標変換した方が汎用的だが、手を抜いている\n      const rect = svgRef.current!.getBoundingClientRect();\n      dispatch({\n        type: 'DRAG',\n        payload: [e.clientX - rect.left, e.clientY - rect.top],\n      });\n    },\n    [dispatch],\n  );\n  const dispatchDragEnd = useCallback(() => dispatch({ type: 'DRAG_END' }), [\n    dispatch,\n  ]);\n  const dragging = Boolean(state.draggingPoint);\n\n  return (\n    <div\n      className={classes.root}\n      onMouseMove={dragging ? dispatchDrag : undefined}\n      onMouseUp={dragging ? dispatchDragEnd : undefined}\n    >\n      <svg\n        ref={svgRef}\n        className={classnames(classes.svg, dragging && classes.svgDragging)}\n        width={svgSize}\n        height={svgSize}\n      >\n        <Bezier index={0} />\n        <Bezier index={1} />\n      </svg>\n      <Controls className={classes.controls} />\n    </div>\n  );\n};\n\n// Provider は、useStore を使う FC より外側にある必要がある\nexport default () => (\n  <Provider>\n    <CssBaseline />\n    <App />\n  </Provider>\n);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}